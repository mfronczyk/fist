{% extends "fist/views/templates/base.html" %}
{% block content %}
 <table class="table table-striped table-condensed">
     <thead>
         <tr>
             <th>Player</th>
             <th>M</th>
             <th>W</th>
             <th>D</th>
             <th>L</th>
             <th>Score</th>
         </tr>
     </thead>
     <tbody>
         {% for p in ranking %}
             <tr>
                 <td>{{p.name}}</td>
                 <td>{{p.stats.m}}</td>
                 <td>{{p.stats.w}}</td>
                 <td>{{p.stats.d}}</td>
                 <td>{{p.stats.l}}</td>
                 <td>{{p.stats.s|double-format:3}}</td>
             </tr>
         {% endfor %}
     </tbody>
 </table>

 <div id="scoreOverTime" class="score-over-time row"></div>

 <div id="matchesDistribution" class="matches-distribution row"></div>

 <script>
     $(function () {
       Highcharts.setOptions({
         global: {
           useUTC: false
         }
       });

       $('#scoreOverTime').highcharts({
         title: {
           text: 'Score Over Time',
           align: 'center'
         },
         xAxis: {
           type: 'datetime',
           ordinal: true
         },
         yAxis: {
           title: {
             text: 'Score'
           },
           min:0,
           max:3
         },
         legend: {
           layout: 'vertical',
           align: 'right',
           verticalAlign: 'middle',
           borderWidth: 0
         },
         series: [
           {% for p in stats %}
             {
               name: "{{p.name}}",
               data: [
                 {% for e in p.stats %}
                   [new Date("{{e.match.occured-at|date:shortDateTime}}").valueOf(), {{e.s}}],
                 {% endfor %}
               ]
             },
           {% endfor %}
         ]
       });

       $('#matchesDistribution').highcharts({
         chart: {
           type: 'bubble'
         },

         title: {
           text: 'Between players'
         },

         xAxis: {
           categories: ['Michał Fronczyk', 'Marek Krzynówek', 'Janusz Mordarski', 'Michał Fronczyk', 'Marek Krzynówek', 'Janusz Mordarski', 'Michał Fronczyk', 'Marek Krzynówek', 'Janusz Mordarski']
         },

         yAxis: {
           categories: ['Michał Fronczyk', 'Marek Krzynówek', 'Janusz Mordarski', 'Michał Fronczyk', 'Marek Krzynówek', 'Janusz Mordarski', 'Michał Fronczyk', 'Marek Krzynówek', 'Janusz Mordarski']
         },

         series: [{
           data: [
             {x: 0,
              y: 0,
              z: 60,
              color: "#FFFF00"
             },
             [0, 1, 10],
             [1, 0, 73],
             [1, 1, 14],
             [2, 2, 63],
             [3, 3, 89],
             [4, 4, 73],
             [5, 5, 14],
             [6, 6, 63],
             [7, 7, 89],
             [8, 8, 73],
           ],
           marker: {
             fillOpacity:0.8
           }
         }]
       });
     });
 </script>
{% endblock %}
