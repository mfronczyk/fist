{% extends "fist/views/templates/base.html" %}
{% block content %}
 <table class="table table-striped table-condensed">
     <thead>
         <tr>
             <th>Player</th>
             <th>M</th>
             <th>W</th>
             <th>D</th>
             <th>L</th>
             <th>Score</th>
         </tr>
     </thead>
     <tbody>
         {% for p in ranking %}
             <tr>
                 <td>{{p.name}}</td>
                 <td>{{p.stats.m}}</td>
                 <td>{{p.stats.w}}</td>
                 <td>{{p.stats.d}}</td>
                 <td>{{p.stats.l}}</td>
                 <td>{{p.stats.s|double-format:3}}</td>
             </tr>
         {% endfor %}
     </tbody>
 </table>

 <div id="scoreOverTime" class="score-over-time"></div>

 <script>
     $(function () {
       Highcharts.setOptions({
         global: {
           useUTC: false
         }
       });

       $('#scoreOverTime').highcharts({
         title: {
           text: 'Score Over Time',
           align: 'center'
         },
         xAxis: {
           type: 'datetime',
           ordinal: true
         },
         yAxis: {
           title: {
             text: 'Score'
           },
           min:0,
           max:3
         },
         legend: {
           layout: 'vertical',
           align: 'right',
           verticalAlign: 'middle',
           borderWidth: 0
         },
         series: [
           {% for p in stats %}
             {
               name: "{{p.name}}",
               data: [
                 {% for e in p.stats %}
                   [new Date("{{e.match.occured-at|date:shortDateTime}}").valueOf(), {{e.s}}],
                 {% endfor %}
               ]
             },
           {% endfor %}
         ]
       });
     });
 </script>
{% endblock %}
